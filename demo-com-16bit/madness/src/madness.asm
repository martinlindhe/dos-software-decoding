; This is 512B
; /mic, 2007

[org 0x100]

mov 	al,0x13
int 	0x10

mov 	si,foo
mov	di,18040
mov	bl,0x40
mov 	cx,1640
push 	0xa000
pop 	es
xor	dx,dx
@@0:
	rol 	bl,2
	jnc 	@@1
	lodsb
	mov 	bh,al
	@@1:
	mov 	al,bh
	shr 	bh,2
	and 	al,3
	shl 	al,2
	add	al,18
	stosb
	stosb
	mov 	[es:di+318],al
	mov 	[es:di+319],al
	inc	dx
	cmp 	dl,40
	jne 	@@2
	add	di,560
	xor	dx,dx
	@@2:
	loop 	@@0		

mov 	ah,2
mov 	dh,19
mov 	dl,14
int 	0x10
mov 	dx,bar
mov 	ah,9
int 	0x21

@@3:
	in 	al,0x60
	dec 	al
	jnz 	@@3

ret

bar:
db "THIS IS 512B$"

foo:
db 111,0,0,0,0,0,0,0,64,175
db 31,0,0,0,0,0,16,0,0,173
db 11,0,0,0,0,0,84,9,0,105
db 2,0,0,0,84,85,85,46,0,105
db 1,0,0,0,80,85,169,185,1,168
db 0,0,0,0,84,170,170,250,2,180
db 0,0,0,0,148,170,175,254,26,180
db 0,0,0,0,80,254,255,255,107,180
db 0,0,0,0,84,165,255,255,171,160
db 0,0,0,80,85,85,234,254,251,145
db 0,0,0,0,0,16,229,105,85,145
db 0,0,0,0,21,0,100,5,80,129
db 0,0,0,0,80,1,184,1,168,67
db 0,0,0,0,160,0,180,0,0,69
db 0,0,0,0,149,1,180,65,85,73
db 0,0,0,0,20,0,228,86,165,74
db 0,0,0,84,25,0,229,171,170,74
db 0,0,0,80,190,1,229,251,251,75
db 0,0,0,64,106,64,229,171,223,74
db 0,0,0,0,25,0,144,107,238,154
db 1,0,0,0,5,0,64,26,233,154
db 1,0,0,0,5,0,64,6,212,154
db 2,0,0,0,5,0,0,0,164,74
db 2,0,0,64,1,0,20,0,144,70
db 6,0,0,64,0,0,85,21,144,134
db 5,0,0,0,0,232,238,90,144,134
db 5,0,0,0,0,0,170,21,144,149
db 10,0,0,0,0,0,0,0,144,165
db 22,0,0,0,0,0,0,0,80,244
db 91,1,0,0,64,5,64,1,0,249
db 91,6,0,0,68,22,144,18,0,253
db 171,26,0,0,4,105,149,37,0,233
db 171,30,0,0,20,148,102,24,0,170
db 233,31,0,0,80,83,165,25,0,170
db 249,42,0,0,64,233,234,27,0,106
db 105,42,0,0,0,149,250,10,0,101
db 86,105,0,0,0,84,85,5,0,106
db 155,106,0,0,0,64,85,5,64,106
db 171,126,0,0,0,0,80,0,64,170
db 171,21,0,0,0,0,0,0,64,170
db 21,0,0,0,0,0,0,0,0,105

